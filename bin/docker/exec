#!/bin/bash

# NOTE: set -o pipefail is needed to ensure that any error or failure causes the whole pipeline to fail.
# Without this specification, the CI status will provide a false sense of security by showing builds
# as succeeding in spite of errors or failures.
set -eo pipefail

IS="$1"
DOCKER_CONTAINER='<DOCKER_CONTAINER>'

# Check for regular user login
if [ ! $( id -u ) -ne 0 ]; then
  echo 'You must be a regular user to run this script.'
  exit 2
fi

echo '******'
echo 'NOTICE'
echo 'If this docker/exec script does not work, then there is probably no'
echo 'running container to join.'
echo

echo '---------------------'
echo 'Executing the command'
echo "$IS"
echo 'in the Docker container'
wait
docker exec -it $DOCKER_CONTAINER $IS
